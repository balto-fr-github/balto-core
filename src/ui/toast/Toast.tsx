import { forwardRef } from "react";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "../../utils/cn";
import { TextBody } from "../typography/TextBody";

export const toastVariants = cva(
  "p-2 inline-flex items-center gap-2 shadow-[0_4px_25.8px_0_rgba(51,51,51,0.10)] rounded-lg",
  {
    variants: {
      type: {
        info: "",
        success: "",
        warning: "",
        error: "bg-[#DC2626] text-white",
      },
    },
    defaultVariants: {
      type: "info",
    },
  }
);

export type ToastProps = {
  children: React.ReactNode;
  type?: string;
  text: string;
  containerClassName?: string;
  textClassName?: string;
  italic?: boolean;
} & VariantProps<typeof toastVariants> &
  React.ComponentPropsWithoutRef<"span">;

export const Toast = forwardRef<HTMLSpanElement, ToastProps>(
  (
    {
      children,
      text,
      type,
      containerClassName,
      textClassName,
      italic = false,
      ...props
    },
    ref
  ) => {
    const renderIcon = () => {
      switch (type) {
        case "info":
          return (
            <div className="w-6 h-6 bg-[#DBEAFE] flex items-center justify-center rounded-full">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1.99998 14.5C1.86738 14.5 1.7402 14.4473 1.64643 14.3536C1.55266 14.2598 1.49998 14.1326 1.49998 14V4C1.46083 3.66223 1.49857 3.31997 1.61036 2.99884C1.72216 2.67771 1.90512 2.38601 2.14556 2.14557C2.386 1.90513 2.67769 1.72217 2.99883 1.61038C3.31996 1.49858 3.66221 1.46085 3.99998 1.5H12C12.3378 1.46085 12.68 1.49858 13.0011 1.61038C13.3223 1.72217 13.614 1.90513 13.8544 2.14557C14.0948 2.38601 14.2778 2.67771 14.3896 2.99884C14.5014 3.31997 14.5391 3.66223 14.5 4V10C14.5391 10.3378 14.5014 10.68 14.3896 11.0012C14.2778 11.3223 14.0948 11.614 13.8544 11.8544C13.614 12.0949 13.3223 12.2778 13.0011 12.3896C12.68 12.5014 12.3378 12.5391 12 12.5H4.20732L2.35332 14.3533C2.30702 14.3999 2.25196 14.4368 2.19132 14.462C2.13067 14.4872 2.06564 14.5001 1.99998 14.5ZM3.99998 2.5C2.94865 2.5 2.49998 2.94867 2.49998 4V12.7927L3.64665 11.6467C3.69297 11.6001 3.74803 11.5632 3.80867 11.5381C3.86931 11.5129 3.93433 11.4999 3.99998 11.5H12C13.0513 11.5 13.5 11.0513 13.5 10V4C13.5 2.94867 13.0513 2.5 12 2.5H3.99998ZM8.67998 5C8.67998 4.82319 8.60975 4.65362 8.48472 4.52859C8.3597 4.40357 8.19013 4.33333 8.01332 4.33333H8.00665C7.87509 4.33465 7.74686 4.37486 7.6381 4.44891C7.52935 4.52296 7.44494 4.62753 7.3955 4.74946C7.34607 4.87139 7.33381 5.00522 7.36028 5.1341C7.38675 5.26298 7.45077 5.38114 7.54426 5.47371C7.63776 5.56628 7.75655 5.62911 7.88569 5.6543C8.01482 5.67949 8.14853 5.6659 8.26995 5.61525C8.39138 5.56461 8.49511 5.47916 8.56808 5.36968C8.64104 5.26019 8.67998 5.13157 8.67998 5ZM8.49998 9V7C8.49998 6.86739 8.4473 6.74021 8.35354 6.64645C8.25977 6.55268 8.13259 6.5 7.99998 6.5C7.86737 6.5 7.7402 6.55268 7.64643 6.64645C7.55266 6.74021 7.49998 6.86739 7.49998 7V9C7.49998 9.13261 7.55266 9.25978 7.64643 9.35355C7.7402 9.44732 7.86737 9.5 7.99998 9.5C8.13259 9.5 8.25977 9.44732 8.35354 9.35355C8.4473 9.25978 8.49998 9.13261 8.49998 9Z"
                  fill="#2563EB"
                />
              </svg>
            </div>
          );
        case "success":
          return (
            <div className="w-6 h-6 bg-[#DCFCE7] flex items-center justify-center rounded-full">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.00002 11.8333C5.93397 11.8331 5.86863 11.8197 5.80777 11.7941C5.7469 11.7685 5.6917 11.7311 5.64535 11.684L2.97869 8.976C2.89049 8.88047 2.84292 8.75437 2.84603 8.62439C2.84914 8.4944 2.9027 8.37073 2.99537 8.27953C3.08805 8.18833 3.21256 8.13676 3.34258 8.13573C3.47259 8.1347 3.59791 8.18428 3.69202 8.274L6.00002 10.6233L12.3134 4.31333C12.4081 4.22501 12.5335 4.17693 12.663 4.17922C12.7926 4.1815 12.9162 4.23398 13.0078 4.32558C13.0994 4.41719 13.1518 4.54078 13.1541 4.67032C13.1564 4.79985 13.1083 4.92522 13.02 5.02L6.35335 11.6867C6.30703 11.7332 6.25197 11.7701 6.19133 11.7953C6.13069 11.8205 6.06567 11.8334 6.00002 11.8333Z"
                  fill="#16A34A"
                />
              </svg>
            </div>
          );
        case "warning":
          return (
            <div className="w-6 h-6 bg-[#FEF3C7] flex items-center justify-center rounded-full">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12.4613 15.1667H3.53933C3.07321 15.1673 2.61489 15.0471 2.20903 14.8179C1.80317 14.5887 1.46361 14.2583 1.22345 13.8588C0.983295 13.4593 0.850728 13.0044 0.838671 12.5384C0.826615 12.0725 0.935481 11.6114 1.15466 11.2L5.55933 2.96133C5.79585 2.51969 6.14778 2.15051 6.57759 1.89313C7.00741 1.63575 7.49901 1.49982 7.99999 1.49982C8.50098 1.49982 8.99257 1.63575 9.42239 1.89313C9.8522 2.15051 10.2041 2.51969 10.4407 2.96133L14.8453 11.2C15.065 11.6113 15.1743 12.0726 15.1625 12.5388C15.1507 13.0049 15.0183 13.4601 14.7782 13.8598C14.538 14.2595 14.1983 14.5902 13.7923 14.8194C13.3862 15.0487 12.9276 15.1688 12.4613 15.168V15.1667ZM7.99999 2.49999C7.67937 2.49705 7.36415 2.58263 7.08903 2.7473C6.81391 2.91198 6.58956 3.14936 6.44066 3.43333L2.03666 11.67C1.89838 11.929 1.82967 12.2195 1.83722 12.513C1.84477 12.8065 1.92833 13.093 2.07974 13.3446C2.23115 13.5962 2.44522 13.8042 2.70105 13.9482C2.95688 14.0923 3.24571 14.1676 3.53933 14.1667H12.4613C12.7549 14.1675 13.0436 14.0921 13.2994 13.948C13.5551 13.8039 13.7691 13.5959 13.9204 13.3443C14.0717 13.0928 14.1553 12.8063 14.1628 12.5128C14.1703 12.2194 14.1016 11.929 13.9633 11.67L9.55933 3.43266C9.41034 3.14882 9.18594 2.91157 8.91083 2.74702C8.63572 2.58247 8.32055 2.49699 7.99999 2.49999ZM8.49999 9.33333V6.66666C8.49999 6.53405 8.44731 6.40687 8.35355 6.31311C8.25978 6.21934 8.1326 6.16666 7.99999 6.16666C7.86738 6.16666 7.74021 6.21934 7.64644 6.31311C7.55267 6.40687 7.49999 6.53405 7.49999 6.66666V9.33333C7.49999 9.46593 7.55267 9.59311 7.64644 9.68688C7.74021 9.78065 7.86738 9.83333 7.99999 9.83333C8.1326 9.83333 8.25978 9.78065 8.35355 9.68688C8.44731 9.59311 8.49999 9.46593 8.49999 9.33333ZM8.67999 11.3333C8.67999 11.1565 8.60975 10.9869 8.48473 10.8619C8.35971 10.7369 8.19014 10.6667 8.01333 10.6667H8.00666C7.8751 10.668 7.74686 10.7082 7.63811 10.7822C7.52936 10.8563 7.44495 10.9609 7.39551 11.0828C7.34607 11.2047 7.33382 11.3385 7.36029 11.4674C7.38676 11.5963 7.45078 11.7145 7.54427 11.807C7.63777 11.8996 7.75656 11.9624 7.8857 11.9876C8.01483 12.0128 8.14853 11.9992 8.26996 11.9486C8.39139 11.8979 8.49512 11.8125 8.56808 11.703C8.64105 11.5935 8.67999 11.4649 8.67999 11.3333Z"
                  fill="#D97706"
                />
              </svg>
            </div>
          );
        case "error":
          return (
            <div className="w-6 h-6 bg-[#FEE2E2] flex items-center justify-center rounded-full">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12.3533 11.6467C12.4024 11.6924 12.4418 11.7477 12.4692 11.809C12.4965 11.8703 12.5112 11.9365 12.5124 12.0037C12.5136 12.0708 12.5012 12.1375 12.4761 12.1997C12.4509 12.262 12.4135 12.3186 12.366 12.366C12.3185 12.4135 12.262 12.4509 12.1997 12.4761C12.1375 12.5012 12.0708 12.5136 12.0036 12.5124C11.9365 12.5112 11.8703 12.4965 11.809 12.4692C11.7476 12.4419 11.6924 12.4025 11.6466 12.3533L7.99998 8.70734L4.35331 12.3533C4.25853 12.4417 4.13316 12.4897 4.00363 12.4875C3.8741 12.4852 3.75051 12.4327 3.6589 12.3411C3.56729 12.2495 3.51481 12.1259 3.51253 11.9964C3.51024 11.8668 3.55833 11.7415 3.64665 11.6467L7.29265 8.00001L3.64665 4.35334C3.55833 4.25856 3.51024 4.1332 3.51253 4.00366C3.51481 3.87413 3.56729 3.75054 3.6589 3.65893C3.75051 3.56732 3.8741 3.51485 4.00363 3.51256C4.13316 3.51027 4.25853 3.55836 4.35331 3.64668L7.99998 7.29268L11.6466 3.64668C11.7414 3.55836 11.8668 3.51027 11.9963 3.51256C12.1259 3.51485 12.2495 3.56732 12.3411 3.65893C12.4327 3.75054 12.4851 3.87413 12.4874 4.00366C12.4897 4.1332 12.4416 4.25856 12.3533 4.35334L8.70731 8.00001L12.3533 11.6467Z"
                  fill="#DC2626"
                />
              </svg>
            </div>
          );
        default:
          return (
            <div className="w-6 h-6 bg-[#DBEAFE] flex items-center justify-center rounded-full">
              <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1.99998 14.5C1.86738 14.5 1.7402 14.4473 1.64643 14.3536C1.55266 14.2598 1.49998 14.1326 1.49998 14V4C1.46083 3.66223 1.49857 3.31997 1.61036 2.99884C1.72216 2.67771 1.90512 2.38601 2.14556 2.14557C2.386 1.90513 2.67769 1.72217 2.99883 1.61038C3.31996 1.49858 3.66221 1.46085 3.99998 1.5H12C12.3378 1.46085 12.68 1.49858 13.0011 1.61038C13.3223 1.72217 13.614 1.90513 13.8544 2.14557C14.0948 2.38601 14.2778 2.67771 14.3896 2.99884C14.5014 3.31997 14.5391 3.66223 14.5 4V10C14.5391 10.3378 14.5014 10.68 14.3896 11.0012C14.2778 11.3223 14.0948 11.614 13.8544 11.8544C13.614 12.0949 13.3223 12.2778 13.0011 12.3896C12.68 12.5014 12.3378 12.5391 12 12.5H4.20732L2.35332 14.3533C2.30702 14.3999 2.25196 14.4368 2.19132 14.462C2.13067 14.4872 2.06564 14.5001 1.99998 14.5ZM3.99998 2.5C2.94865 2.5 2.49998 2.94867 2.49998 4V12.7927L3.64665 11.6467C3.69297 11.6001 3.74803 11.5632 3.80867 11.5381C3.86931 11.5129 3.93433 11.4999 3.99998 11.5H12C13.0513 11.5 13.5 11.0513 13.5 10V4C13.5 2.94867 13.0513 2.5 12 2.5H3.99998ZM8.67998 5C8.67998 4.82319 8.60975 4.65362 8.48472 4.52859C8.3597 4.40357 8.19013 4.33333 8.01332 4.33333H8.00665C7.87509 4.33465 7.74686 4.37486 7.6381 4.44891C7.52935 4.52296 7.44494 4.62753 7.3955 4.74946C7.34607 4.87139 7.33381 5.00522 7.36028 5.1341C7.38675 5.26298 7.45077 5.38114 7.54426 5.47371C7.63776 5.56628 7.75655 5.62911 7.88569 5.6543C8.01482 5.67949 8.14853 5.6659 8.26995 5.61525C8.39138 5.56461 8.49511 5.47916 8.56808 5.36968C8.64104 5.26019 8.67998 5.13157 8.67998 5ZM8.49998 9V7C8.49998 6.86739 8.4473 6.74021 8.35354 6.64645C8.25977 6.55268 8.13259 6.5 7.99998 6.5C7.86737 6.5 7.7402 6.55268 7.64643 6.64645C7.55266 6.74021 7.49998 6.86739 7.49998 7V9C7.49998 9.13261 7.55266 9.25978 7.64643 9.35355C7.7402 9.44732 7.86737 9.5 7.99998 9.5C8.13259 9.5 8.25977 9.44732 8.35354 9.35355C8.4473 9.25978 8.49998 9.13261 8.49998 9Z"
                  fill="#2563EB"
                />
              </svg>
            </div>
          );
      }
    };

    return (
      <span
        ref={ref}
        className={cn(toastVariants({ type }), containerClassName)}
        {...props}
      >
        {renderIcon()}
        <TextBody
          size="sm"
          weight="regular"
          className={cn(textClassName, type === "error" && "text-white")}
        >
          {text}
        </TextBody>
      </span>
    );
  }
);

Toast.displayName = "Toast";
